<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <link rel="stylesheet" href="../css/purchase.css"/>
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
    />
    <link
    rel = "shortcut icon"
    href = "https://img.icons8.com/?size=100&id=enZOTH5kGrxd&format=png&color=000000"
    type = "image/x-icon"
    />
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary" id="navbar">
        <div class="container-fluid" style="gap: 20px;">
          <img
            src="https://img.icons8.com/?size=60&id=123620&format=png&color=000000"
            alt="icon img"
          />
          <a class="navbar-brand" href="../index.html">Hao's Grocery</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <form class="d-flex" role="search">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success" type="submit">Search</button>
          </form>
        </div>
    </nav>
    <div class="product-container">
        <h1 class="productName" id="productName">Cart</h1>
    
        <div class="product-list" id="productList">
          <!-- Các sản phẩm trong giỏ hàng sẽ được thêm vào đây -->
        </div>
    
        <button class="checkout-button" onclick="Checkout()">Checkout</button>
    </div>

    <script>
      // Lấy các sản phẩm từ localStorage
      let cartItems = JSON.parse(localStorage.getItem('cartItems')) || []

      // Hiển thị các sản phẩm trong giỏ hàng
      function displayCartItems() {
        const productList = document.getElementById('productList')
        productList.innerHTML = ''

        if (cartItems.length === 0) {
          productList.innerHTML = '<p>Không có sản phẩm nào trong giỏ hàng.</p>'
          return
        }

        cartItems.forEach(item => {
          const productDiv = document.createElement('div')
          productDiv.className = 'product-item'
          productDiv.innerHTML = `
            <img src="../product-image/${item.selectedImage}" alt="${item.selectedPName}" class="cart-image">
            <p>${item.selectedPName}</p>
            <p>${item.selectedDesc}</p>
          `
          productList.appendChild(productDiv)
        })
      }

      // Xử lý khi người dùng nhấn nút "Checkout"
      function Checkout() {
        if (cartItems.length > 0) {
          alert('Cảm ơn bạn đã mua hàng!')
          clearAllLocalStorage()
        } else {
          alert('Giỏ hàng của bạn đang trống.')
        }
      }

      // Xóa tất cả dữ liệu trong localStorage
      function clearAllLocalStorage() {
        localStorage.clear()
        cartItems = []
        displayCartItems()
      }

      // Hiển thị sản phẩm trong giỏ hàng khi trang được tải
      displayCartItems()

  </script>
</body>
</html>
